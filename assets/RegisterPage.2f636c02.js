import{u as P,k as U,r as t,z as B,a as l,c as C,h as s,b as a,w as n,T as _,R as F,o as N,d as S,m as g}from"./index.8d236b8f.js";import{p as T}from"./formPattern.1a1470a4.js";import{_ as D}from"./plugin-vue_export-helper.21dcd24c.js";const z={class:"page"},A={class:"form-box"},E={class:"form-button-box"},I=g("\u6CE8\u518C"),L={class:"page-footer"},j={class:"page-footer-wrap van-safe-area-bottom"},G=g("\u7528\u6237\u534F\u8BAE"),H={name:"RegisterPage",setup(J){const v=P();U();function b(){v.replace({path:"/login"})}const V=t(null),d=t(""),c=t(""),m=t(""),i=t([]),p=t(!1),h=t(!0),x=B({time:60*1e3,onFinish:()=>{h.value=!0,x.reset()}}),w=async f=>{if(console.log("submit",f),!p.value)return _.fail("\u8BF7\u9605\u8BFB\u5E76\u52FE\u9009\u7528\u6237\u534F\u8BAE"),!1;const e={username:d.value,password:c.value,avatar:i.value[0].content,phone:m.value};console.log(e);const r=await F(e);r.data.code?(_.success("\u6CE8\u518C\u6210\u529F"),await v.replace({path:"/login"})):_.fail(r.msg)};return(f,e)=>{const r=l("van-uploader"),u=l("van-field"),k=l("van-cell-group"),y=l("van-button"),q=l("van-form"),R=l("van-checkbox");return N(),C("div",z,[s("div",A,[a(q,{ref_key:"logoForm",ref:V,onSubmit:w},{default:n(()=>[a(k,null,{default:n(()=>[a(u,{name:"uploader",label:"\u5934\u50CF",required:""},{input:n(()=>[a(r,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o),multiple:"","max-count":1},null,8,["modelValue"])]),_:1}),a(u,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=o=>d.value=o),name:"username",label:"\u7528\u6237\u540D",required:"",clearable:"",center:"",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}]},null,8,["modelValue"]),a(u,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=o=>c.value=o),name:"password",label:"\u5BC6\u7801",required:"",clearable:"",center:"",autocomplete:"off",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}]},null,8,["modelValue"]),a(u,{modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=o=>m.value=o),name:"phone",label:"\u624B\u673A\u53F7",required:"",clearable:"",center:"",autocomplete:"tel",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},{pattern:S(T),message:"\u624B\u673A\u53F7\u683C\u5F0F\u6709\u8BEF"}]},null,8,["modelValue","rules"])]),_:1}),s("div",E,[a(y,{round:"",block:"",type:"primary","native-type":"submit"},{default:n(()=>[I]),_:1})])]),_:1},512)]),s("div",{class:"display-flex-between mg-small"},[s("div",{class:"button-text",onClick:b},"\u767B\u5F55")]),s("div",L,[s("div",j,[a(R,{modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=o=>p.value=o)},{default:n(()=>[G]),_:1},8,["modelValue"])])])])}}};var Q=D(H,[["__scopeId","data-v-ed32c454"]]);export{Q as default};
