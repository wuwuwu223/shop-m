import{u as be,k as ye,q as we,v as Be,D as xe,r as Ue,a as I,c as ae,b as D,w as F,F as re,o as A,h as Re,d as C,f as ie,j as _e,E as Te,H as Oe,e as Ie,m as ke,T as ne}from"./index.8d236b8f.js";import{_ as De}from"./plugin-vue_export-helper.21dcd24c.js";/*!
 * Compressor.js v1.1.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-10-05T02:32:40.212Z
 */function oe(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);e&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,a)}return t}function E(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oe(Object(t),!0).forEach(function(a){Ee(r,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):oe(Object(t)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(t,a))})}return r}function Ae(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function se(r,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function Ce(r,e,t){return e&&se(r.prototype,e),t&&se(r,t),r}function Ee(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function P(){return P=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},P.apply(this,arguments)}var fe={exports:{}};(function(r){typeof window!="undefined"&&function(e){var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,a=e.Blob&&function(){try{return Boolean(new Blob)}catch{return!1}}(),o=a&&e.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),i=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,u=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,c=(a||i)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(s){var l,f,h,m,g,n,b,v,w;if(l=s.match(u),!l)throw new Error("invalid data URI");for(f=l[2]?l[1]:"text/plain"+(l[3]||";charset=US-ASCII"),h=!!l[4],m=s.slice(l[0].length),h?g=atob(m):g=decodeURIComponent(m),n=new ArrayBuffer(g.length),b=new Uint8Array(n),v=0;v<g.length;v+=1)b[v]=g.charCodeAt(v);return a?new Blob([o?b:n],{type:f}):(w=new i,w.append(n),w.getBlob(f))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(s,l,f){var h=this;setTimeout(function(){f&&t.toDataURL&&c?s(c(h.toDataURL(l,f))):s(h.mozGetAsFile("blob",l))})}:t.toDataURL&&c&&(t.msToBlob?t.toBlob=function(s,l,f){var h=this;setTimeout(function(){(l&&l!=="image/png"||f)&&t.toDataURL&&c?s(c(h.toDataURL(l,f))):s(h.msToBlob(l))})}:t.toBlob=function(s,l,f){var h=this;setTimeout(function(){s(c(h.toDataURL(l,f)))})})),r.exports?r.exports=c:e.dataURLtoBlob=c}(window)})(fe);var Pe=fe.exports,Le=function(e){return typeof Blob=="undefined"?!1:e instanceof Blob||Object.prototype.toString.call(e)==="[object Blob]"},le={strict:!0,checkOrientation:!0,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},Me=typeof window!="undefined"&&typeof window.document!="undefined",B=Me?window:{},L=function(e){return e>0&&e<1/0},je=Array.prototype.slice;function ze(r){return Array.from?Array.from(r):je.call(r)}var Fe=/^image\/.+$/;function H(r){return Fe.test(r)}function He(r){var e=H(r)?r.substr(6):"";return e==="jpeg"&&(e="jpg"),".".concat(e)}var he=String.fromCharCode;function We(r,e,t){var a="",o;for(t+=e,o=e;o<t;o+=1)a+=he(r.getUint8(o));return a}var Se=B.btoa;function Ne(r,e){for(var t=[],a=8192,o=new Uint8Array(r);o.length>0;)t.push(he.apply(null,ze(o.subarray(0,a)))),o=o.subarray(a);return"data:".concat(e,";base64,").concat(Se(t.join("")))}function Ve(r){var e=new DataView(r),t;try{var a,o,i;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var u=e.byteLength,c=2;c+1<u;){if(e.getUint8(c)===255&&e.getUint8(c+1)===225){o=c;break}c+=1}if(o){var s=o+4,l=o+10;if(We(e,s,4)==="Exif"){var f=e.getUint16(l);if(a=f===18761,(a||f===19789)&&e.getUint16(l+2,a)===42){var h=e.getUint32(l+4,a);h>=8&&(i=l+h)}}}if(i){var m=e.getUint16(i,a),g,n;for(n=0;n<m;n+=1)if(g=i+n*12+2,e.getUint16(g,a)===274){g+=8,t=e.getUint16(g,a),e.setUint16(g,1,a);break}}}catch{t=1}return t}function Xe(r){var e=0,t=1,a=1;switch(r){case 2:t=-1;break;case 3:e=-180;break;case 4:a=-1;break;case 5:e=90,a=-1;break;case 6:e=90;break;case 7:e=90,t=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:t,scaleY:a}}var Ge=/\.\d*(?:0|9){12}\d*$/;function ue(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Ge.test(r)?Math.round(r*e)/e:r}function k(r){var e=r.aspectRatio,t=r.height,a=r.width,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",i=L(a),u=L(t);if(i&&u){var c=t*e;(o==="contain"||o==="none")&&c>a||o==="cover"&&c<a?t=a/e:a=t*e}else i?t=a/e:u&&(a=t*e);return{width:a,height:t}}var Ye=B.ArrayBuffer,ce=B.FileReader,x=B.URL||B.webkitURL,$e=/\.\w+$/,Ke=B.Compressor,qe=function(){function r(e,t){Ae(this,r),this.file=e,this.image=new Image,this.options=E(E({},le),t),this.aborted=!1,this.result=null,this.init()}return Ce(r,[{key:"init",value:function(){var t=this,a=this.file,o=this.options;if(!Le(a)){this.fail(new Error("The first argument must be a File or Blob object."));return}var i=a.type;if(!H(i)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!x||!ce){this.fail(new Error("The current browser does not support image compression."));return}if(Ye||(o.checkOrientation=!1),x&&!o.checkOrientation)this.load({url:x.createObjectURL(a)});else{var u=new ce,c=o.checkOrientation&&i==="image/jpeg";this.reader=u,u.onload=function(s){var l=s.target,f=l.result,h={};if(c){var m=Ve(f);m>1||!x?(h.url=Ne(f,i),m>1&&P(h,Xe(m))):h.url=x.createObjectURL(a)}else h.url=f;t.load(h)},u.onabort=function(){t.fail(new Error("Aborted to read the image with FileReader."))},u.onerror=function(){t.fail(new Error("Failed to read the image with FileReader."))},u.onloadend=function(){t.reader=null},c?u.readAsArrayBuffer(a):u.readAsDataURL(a)}}},{key:"load",value:function(t){var a=this,o=this.file,i=this.image;i.onload=function(){a.draw(E(E({},t),{},{naturalWidth:i.naturalWidth,naturalHeight:i.naturalHeight}))},i.onabort=function(){a.fail(new Error("Aborted to load the image."))},i.onerror=function(){a.fail(new Error("Failed to load the image."))},B.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(B.navigator.userAgent)&&(i.crossOrigin="anonymous"),i.alt=o.name,i.src=t.url}},{key:"draw",value:function(t){var a=this,o=t.naturalWidth,i=t.naturalHeight,u=t.rotate,c=u===void 0?0:u,s=t.scaleX,l=s===void 0?1:s,f=t.scaleY,h=f===void 0?1:f,m=this.file,g=this.image,n=this.options,b=document.createElement("canvas"),v=b.getContext("2d"),w=Math.abs(c)%180===90,R=(n.resize==="contain"||n.resize==="cover")&&L(n.width)&&L(n.height),y=Math.max(n.maxWidth,0)||1/0,_=Math.max(n.maxHeight,0)||1/0,T=Math.max(n.minWidth,0)||0,O=Math.max(n.minHeight,0)||0,U=o/i,d=n.width,p=n.height;if(w){var W=[_,y];y=W[0],_=W[1];var S=[O,T];T=S[0],O=S[1];var N=[p,d];d=N[0],p=N[1]}R&&(U=d/p);var V=k({aspectRatio:U,width:y,height:_},"contain");y=V.width,_=V.height;var X=k({aspectRatio:U,width:T,height:O},"cover");if(T=X.width,O=X.height,R){var G=k({aspectRatio:U,width:d,height:p},n.resize);d=G.width,p=G.height}else{var Y=k({aspectRatio:U,width:d,height:p}),$=Y.width;d=$===void 0?o:$;var K=Y.height;p=K===void 0?i:K}d=Math.floor(ue(Math.min(Math.max(d,T),y))),p=Math.floor(ue(Math.min(Math.max(p,O),_)));var me=-d/2,ve=-p/2,ge=d,de=p,M=[];if(R){var q=0,J=0,j=o,z=i,Q=k({aspectRatio:U,width:o,height:i},{contain:"cover",cover:"contain"}[n.resize]);j=Q.width,z=Q.height,q=(o-j)/2,J=(i-z)/2,M.push(q,J,j,z)}if(M.push(me,ve,ge,de),w){var Z=[p,d];d=Z[0],p=Z[1]}b.width=d,b.height=p,H(n.mimeType)||(n.mimeType=m.type);var ee="transparent";if(m.size>n.convertSize&&n.convertTypes.indexOf(n.mimeType)>=0&&(n.mimeType="image/jpeg"),n.mimeType==="image/jpeg"&&(ee="#fff"),v.fillStyle=ee,v.fillRect(0,0,d,p),n.beforeDraw&&n.beforeDraw.call(this,v,b),!this.aborted&&(v.save(),v.translate(d/2,p/2),v.rotate(c*Math.PI/180),v.scale(l,h),v.drawImage.apply(v,[g].concat(M)),v.restore(),n.drew&&n.drew.call(this,v,b),!this.aborted)){var te=function(pe){a.aborted||a.done({naturalWidth:o,naturalHeight:i,result:pe})};b.toBlob?b.toBlob(te,n.mimeType,n.quality):te(Pe(b.toDataURL(n.mimeType,n.quality)))}}},{key:"done",value:function(t){var a=t.naturalWidth,o=t.naturalHeight,i=t.result,u=this.file,c=this.image,s=this.options;if(x&&!s.checkOrientation&&x.revokeObjectURL(c.src),i)if(s.strict&&i.size>u.size&&s.mimeType===u.type&&!(s.width>a||s.height>o||s.minWidth>a||s.minHeight>o||s.maxWidth<a||s.maxHeight<o))i=u;else{var l=new Date;i.lastModified=l.getTime(),i.lastModifiedDate=l,i.name=u.name,i.name&&i.type!==u.type&&(i.name=i.name.replace($e,He(i.type)))}else i=u;this.result=i,s.success&&s.success.call(this,i)}},{key:"fail",value:function(t){var a=this.options;if(a.error)a.error.call(this,t);else throw t}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=Ke,r}},{key:"setDefaults",value:function(t){P(le,t)}}]),r}();const Je={class:"user-img-box",style:{width:"100%",display:"flex","justify-content":"flex-end"}},Qe=ke("\u9000\u51FA"),Ze={name:"UserInfoPage",setup(r){const e=be();ye();const t=we(),{userInfo:a}=Be(t),o=xe(()=>[{title:"\u540D\u79F0",value:a.value.name,to:"/changeName"},{title:"\u4FEE\u6539\u5BC6\u7801",value:"",to:"/changePassword"}]),i=5*1024*1024,u=Ue(null);function c(){u.value.chooseFile()}function s(m){return new Promise(g=>{new qe(m,{success:g,error(n){console.log(n.message)}})})}function l(m){ne("\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 5M")}function f(m){console.log(m),new FormData().append("file",m.file);const n=ne.loading({message:"\u4E0A\u4F20\u4E2D..."});setTimeout(()=>{n.clear(),t.userInfo.headerImg=m.content},1e3)}function h(){t.loginOutFn().then(m=>{e.replace("/login")}).catch(m=>{console.log(m)})}return(m,g)=>{const n=I("van-image"),b=I("van-uploader"),v=I("van-cell"),w=I("van-cell-group"),R=I("van-button");return A(),ae(re,null,[D(w,null,{default:F(()=>[D(v,{title:"\u5934\u50CF","is-link":"",center:"",onClick:c},{default:F(()=>[Re("div",Je,[C(a).headerImg?(A(),ie(n,{key:0,class:"user-img","lazy-load":"",src:C(a).headerImg},null,8,["src"])):_e("",!0),Te(D(b,{ref_key:"userImgUploader",ref:u,"max-size":i,onOversize:l,"before-read":s,"after-read":f,"preview-size":"68"},null,512),[[Oe,!C(a).headerImg]])])]),_:1}),(A(!0),ae(re,null,Ie(C(o),y=>(A(),ie(v,{title:y.title,value:y.value,to:y.to,"is-link":""},null,8,["title","value","to"]))),256))]),_:1}),D(R,{type:"primary",plain:"",block:"",color:"#fff",onClick:h,class:"button--text-blank_white-bg mgt-middle"},{default:F(()=>[Qe]),_:1})],64)}}};var rt=De(Ze,[["__scopeId","data-v-4ced622f"]]);export{rt as default};
