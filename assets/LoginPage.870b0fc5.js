import{u as N,k as P,r as a,z as R,q as T,a as o,c as b,h as s,b as n,w as l,T as g,L as A,s as D,o as i,F as I,e as j,f as z,j as E,m as h}from"./index.8d236b8f.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";const H={class:"page"},J={class:"tabs-box"},K={class:"form-box"},M={class:"form-button-box"},O=h("\u767B\u5F55"),Q={class:"page-footer"},W={class:"page-footer-wrap van-safe-area-bottom"},X=h("\u7528\u6237\u534F\u8BAE"),Y={name:"LoginPage",setup(Z){const r=N(),m=P();function w(){r.replace({path:"/register"})}const _=[{label:"\u767B\u9646",value:0}],u=a(_[0].value),k=a(null),p=a(""),v=a("");a(""),a("");const c=a(!1),x=a(!0),y=R({time:60*1e3,onFinish:()=>{x.value=!0,y.reset()}}),V=T(),q=async d=>{if(console.log("submit",d),!c.value)return g.fail("\u8BF7\u9605\u8BFB\u5E76\u52FE\u9009\u7528\u6237\u534F\u8BAE"),!1;let e=await A(d);if(e.data.code!==!0){g.fail(e.data.msg);return}D.set("token",e.data.data.token,{path:"/"}),await V.getUserInfoFn(),console.log(e),m.query.from?await r.push({name:m.query.from}):await r.push({path:"/user"})};return(d,e)=>{const L=o("van-tab"),F=o("van-tabs"),f=o("van-field"),U=o("van-cell-group"),B=o("van-button"),C=o("van-form"),S=o("van-checkbox");return i(),b("div",H,[s("div",J,[n(F,{active:u.value,"onUpdate:active":e[0]||(e[0]=t=>u.value=t)},{default:l(()=>[(i(),b(I,null,j(_,t=>n(L,{key:t.value,title:t.label,name:t.value},null,8,["title","name"])),64))]),_:1},8,["active"])]),s("div",K,[n(C,{ref_key:"logoForm",ref:k,onSubmit:q},{default:l(()=>[u.value===0?(i(),z(U,{key:0},{default:l(()=>[n(f,{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=t=>p.value=t),name:"username",label:"\u7528\u6237\u540D",required:"",clearable:"",center:"",autocomplete:"username",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}]},null,8,["modelValue"]),n(f,{modelValue:v.value,"onUpdate:modelValue":e[2]||(e[2]=t=>v.value=t),type:"password",name:"password",label:"\u5BC6\u7801",required:"",clearable:"",center:"",autocomplete:"current-password",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}]},null,8,["modelValue"])]),_:1})):E("",!0),s("div",M,[n(B,{round:"",block:"",type:"primary","native-type":"submit"},{default:l(()=>[O]),_:1})])]),_:1},512)]),s("div",{class:"display-flex-between mg-small"},[s("div",{class:"button-text",onClick:w},"\u6CE8\u518C")]),s("div",Q,[s("div",W,[n(S,{modelValue:c.value,"onUpdate:modelValue":e[3]||(e[3]=t=>c.value=t)},{default:l(()=>[X]),_:1},8,["modelValue"])])])])}}};var te=G(Y,[["__scopeId","data-v-4dcb36ec"]]);export{te as default};
